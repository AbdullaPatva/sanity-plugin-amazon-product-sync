{"version":3,"file":"index.js","sources":["../src/lib/config.ts","../src/inputs/AmazonSettingsActions.tsx","../src/schemas/amazonSettings.ts","../src/schemas/amazonProduct.ts","../src/schemas/amazonProductBlock.ts","../src/inputs/AmazonFetchButton.tsx","../src/schemas/amazonFetchButton.ts","../src/index.ts"],"sourcesContent":["/**\n * Amazon Plugin Configuration\n * \n * This file centralizes configuration settings for the Amazon plugin,\n * including API endpoints and environment variable handling.\n */\n\n/**\n * Get the API base URL from environment variables\n * \n * @returns The API base URL (e.g., http://localhost:3001)\n * @throws Error if SANITY_STUDIO_AMAZON_API_URL is not defined\n */\nexport function getApiBaseUrl(): string {\n  const envUrl = process.env.SANITY_STUDIO_AMAZON_API_URL\n  \n  if (!envUrl) {\n    throw new Error('SANITY_STUDIO_AMAZON_API_URL environment variable is not defined. Please add it to your .env.local file in the Sanity Studio root.')\n  }\n  \n  // Validate URL format\n  try {\n    new URL(envUrl)\n    return envUrl\n  } catch {\n    throw new Error(`Invalid SANITY_STUDIO_AMAZON_API_URL format: ${envUrl}. Please provide a valid URL (e.g., http://localhost:3001)`)\n  }\n}\n\n/**\n * Get the test connection endpoint path from environment variables\n * \n * @returns The test connection endpoint path\n * @throws Error if SANITY_STUDIO_AMAZON_TEST_CONNECTION_PATH is not defined\n */\nexport function getTestConnectionPath(): string {\n  const path = process.env.SANITY_STUDIO_AMAZON_TEST_CONNECTION_PATH\n  \n  if (!path) {\n    throw new Error('SANITY_STUDIO_AMAZON_TEST_CONNECTION_PATH environment variable is not defined. Please add it to your .env.local file in the Sanity Studio root.')\n  }\n  \n  return path\n}\n\n/**\n * Get the fetch product endpoint path from environment variables\n * \n * @returns The fetch product endpoint path\n * @throws Error if SANITY_STUDIO_AMAZON_FETCH_PRODUCT_PATH is not defined\n */\nexport function getFetchProductPath(): string {\n  const path = process.env.SANITY_STUDIO_AMAZON_FETCH_PRODUCT_PATH\n  \n  if (!path) {\n    throw new Error('SANITY_STUDIO_AMAZON_FETCH_PRODUCT_PATH environment variable is not defined. Please add it to your .env.local file in the Sanity Studio root.')\n  }\n  \n  return path\n} ","import {useState} from 'react'\nimport {Button, Card, Flex, Stack, Text, useToast} from '@sanity/ui'\nimport type {InputProps} from 'sanity'\nimport {useFormValue} from 'sanity'\nimport {getApiBaseUrl, getTestConnectionPath} from '../lib/config'\n\nexport type SettingsActionsInputProps = InputProps & {\n  // document is available on props in Studio; typing as any for plugin portability\n  document?: any\n}\n\nexport function AmazonSettingsActions(props: SettingsActionsInputProps) {\n  const toast = useToast()\n  const [loading, setLoading] = useState(false)\n  \n  // Real-time form values\n  const accessKey = useFormValue(['accessKey']) as string\n  const secretKey = useFormValue(['secretKey']) as string\n  const partnerTag = useFormValue(['partnerTag']) as string\n  const asinNumber = useFormValue(['asinNumber']) as string\n  const region = useFormValue(['region']) as string\n\n  const hasCredentials = Boolean(accessKey && secretKey && partnerTag && asinNumber)\n\n  return (\n    <Card padding={3} tone=\"primary\" radius={2} shadow={1}>\n      <Stack space={3}>\n        <Flex gap={2}>\n          <Button\n            text=\"Test API Connection\"\n            tone=\"positive\"\n            disabled={loading || !hasCredentials}\n            onClick={async () => {\n              if (!accessKey || !secretKey || !partnerTag || !asinNumber) {\n                toast.push({\n                  status: 'warning',\n                  title: 'Missing Credentials',\n                  description: 'Please fill in all required fields first'\n                })\n                return\n              }\n              \n              setLoading(true)\n              try {\n                const apiUrl = `${getApiBaseUrl()}${getTestConnectionPath()}`\n                const response = await fetch(apiUrl, {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json',\n                  },\n                  body: JSON.stringify({\n                    testAsin: asinNumber\n                  })\n                })\n\n                if (!response.ok) {\n                  const errorData = await response.json().catch(() => ({}))\n                  throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`)\n                }\n\n                const result = await response.json()\n                \n                if (result.success) {\n                  toast.push({\n                    status: 'success',\n                    title: 'Amazon API Test Successful!',\n                    description: `Successfully fetched: ${result.testProduct.title}`\n                  })\n                } else {\n                  throw new Error(result.error || 'API test failed')\n                }\n              } catch (error: any) {\n                toast.push({\n                  status: 'error',\n                  title: 'API Test Failed',\n                  description: error?.message || 'Unknown error occurred'\n                })\n              } finally {\n                setLoading(false)\n              }\n            }}\n            loading={loading}\n          />\n          \n          <Button\n            text=\"Debug Document\"\n            tone=\"caution\"\n            disabled={loading}\n            onClick={() => {\n              const debugInfo = {\n                accessKey: accessKey ? `${accessKey.substring(0, 8)}...` : 'Not set',\n                secretKey: secretKey ? `${secretKey.substring(0, 8)}...` : 'Not set',\n                partnerTag: partnerTag || 'Not set',\n                asinNumber: asinNumber || 'Not set',\n                region: region || 'Not set',\n                hasCredentials\n              }\n              \n              console.log('Amazon Settings Debug Info:', debugInfo)\n              \n              toast.push({\n                status: 'info',\n                title: 'Debug Info Logged',\n                description: 'Check browser console for details'\n              })\n            }}\n          />\n        </Flex>\n        <Text size={1}>\n          Please make sure to \"Publish\" the document incase you have modified the Access Key, Secret Key, or Partner Tag.\n        </Text>\n        {hasCredentials && (\n          <Text size={1} muted>\n            âœ… Ready to test API connection with {asinNumber}\n          </Text>\n        )}\n      </Stack>\n    </Card>\n  )\n}","import {defineType, defineField} from 'sanity'\nimport {AmazonSettingsActions} from '../inputs/AmazonSettingsActions'\n\nexport const amazonSettingsSchema = defineType({\n  name: 'amazon.settings',\n  title: 'Amazon Settings',\n  type: 'document',\n  groups: [\n    { name: 'api', title: 'API Configuration' },\n    { name: 'actions', title: 'Actions' },\n    { name: 'display', title: 'Display Settings' },\n  ],\n  fields: [\n    defineField({\n      name: 'region',\n      title: 'Amazon Region',\n      type: 'string',\n      group: 'api',\n      options: {\n        list: [\n          {title: 'US (default)', value: 'com'},\n          {title: 'Australia', value: 'com.au'},\n          {title: 'Belgium', value: 'com.be'},\n          {title: 'Brazil', value: 'com.br'},\n          {title: 'Canada', value: 'ca'},\n          {title: 'Egypt', value: 'eg'},\n          {title: 'France', value: 'fr'},\n          {title: 'Germany', value: 'de'},\n          {title: 'India', value: 'in'},\n          {title: 'Italy', value: 'it'},\n          {title: 'Japan', value: 'co.jp'},\n          {title: 'Mexico', value: 'com.mx'},\n          {title: 'Netherlands', value: 'nl'},\n          {title: 'Poland', value: 'pl'},\n          {title: 'Singapore', value: 'sg'},\n          {title: 'Saudi Arabia', value: 'sa'},\n          {title: 'Spain', value: 'es'},\n          {title: 'Sweden', value: 'se'},\n          {title: 'Turkey', value: 'com.tr'},\n          {title: 'United Arab Emirates', value: 'ae'},\n          {title: 'United Kingdom', value: 'co.uk'}\n        ],\n      },\n      initialValue: 'com',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'accessKey',\n      title: 'PA-API Access Key',\n      type: 'string',\n      group: 'api',\n      description: 'Enter your Amazon API Access Key to authenticate API requests.',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'secretKey',\n      title: 'PA-API Secret Key',\n      type: 'string',\n      group: 'api',\n      description: 'Enter your Amazon API Secret Key for secure access to the API.',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'partnerTag',\n      title: 'Associate Tag (Partner Tag)',\n      type: 'string',\n      group: 'api',\n      description: 'Enter your Amazon Partner Tag for tracking and attribution in the affiliate program.',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'asinNumber',\n      title: 'Enter random ASIN Number',\n      type: 'string',\n      group: 'actions',\n      description: 'From Amazon product\\'s page add ASIN number of any product for testing API connection.',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'settingsActions',\n      title: 'Actions',\n      type: 'string',\n      group: 'actions',\n      components: {\n        input: AmazonSettingsActions,\n      },\n    }),\n    defineField({\n      name: 'cacheHours',\n      title: 'Cache Duration (hours)',\n      type: 'number',\n      group: 'api',\n      initialValue: 24,\n      validation: (r: any) => r.min(1).max(168),\n    }),\n    defineField({\n      name: 'showProductTitle',\n      title: 'Show Product Title',\n      type: 'boolean',\n      group: 'display',\n      initialValue: true,\n    }),\n    defineField({\n      name: 'showProductImage',\n      title: 'Show Product Image',\n      type: 'boolean',\n      group: 'display',\n      initialValue: true,\n    }),\n    defineField({\n      name: 'showProductFeatures',\n      title: 'Show Product Features',\n      type: 'boolean',\n      group: 'display',\n      initialValue: true,\n    }),\n    defineField({\n      name: 'showProductPrice',\n      title: 'Show Product Price',\n      type: 'boolean',\n      group: 'display',\n      initialValue: true,\n    }),\n    defineField({\n      name: 'showCtaLink',\n      title: 'Show CTA Link',\n      type: 'boolean',\n      group: 'display',\n      initialValue: true,\n    }),\n  ],\n  preview: {\n    prepare: () => ({\n      title: 'Amazon Settings',\n    }),\n  },\n})\n\n","import { defineType, defineField, defineArrayMember } from 'sanity'\n\nexport const amazonProductSchema = defineType({\n  name: 'amazon.product',\n  title: 'Amazon Products',\n  type: 'document',\n  fields: [\n    defineField({\n      name: 'asin',\n      title: 'ASIN',\n      type: 'string',\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'fetchButton',\n      title: 'Fetch from Amazon',\n      type: 'amazonFetchButton',\n    }),\n    defineField({\n      name: 'title',\n      title: 'Title',\n      type: 'string',\n    }),\n    defineField({\n      name: 'slug',\n      title: 'Slug',\n      type: 'slug',\n      options: {\n        source: 'title',\n        maxLength: 96,\n      },\n    }),\n    defineField({\n      name: 'url',\n      title: 'Product URL',\n      type: 'url',\n    }),\n    defineField({\n      name: 'brand',\n      title: 'Brand',\n      type: 'string',\n    }),\n    defineField({\n      name: 'features',\n      title: 'Features',\n      type: 'array',\n      of: [defineArrayMember({ type: 'string' })],\n    }),\n    defineField({\n      name: 'price',\n      title: 'Price (display)',\n      type: 'string',\n    }),\n    defineField({\n      name: 'salePrice',\n      title: 'Sale Price (display)',\n      type: 'string',\n    }),\n    defineField({\n      name: 'currency',\n      title: 'Currency',\n      type: 'string',\n    }),\n    defineField({\n      name: 'listPrice',\n      title: 'List Price (display)',\n      type: 'string',\n    }),\n    defineField({\n      name: 'images',\n      title: 'Images',\n      type: 'array',\n      of: [\n        defineArrayMember({\n          type: 'object',\n          fields: [\n            { name: 'url', title: 'URL', type: 'url' },\n            { name: 'width', title: 'Width', type: 'number' },\n            { name: 'height', title: 'Height', type: 'number' },\n          ],\n        }),\n      ],\n    }),\n    defineField({\n      name: 'lastSyncedAt',\n      title: 'Last Synced At',\n      type: 'datetime',\n      readOnly: true,\n    }),\n  ],\n})\n\n","import {defineType, defineField} from 'sanity'\n\nexport const amazonProductBlock = defineType({\n  name: 'amazon.productBlock',\n  title: 'Amazon Product',\n  type: 'object',\n  fields: [\n    defineField({\n      name: 'product',\n      title: 'Product',\n      type: 'reference',\n      to: [{type: 'amazon.product'}],\n      validation: (r: any) => r.required(),\n    }),\n    defineField({\n      name: 'showPrice',\n      title: 'Show price',\n      type: 'boolean',\n      initialValue: true,\n    }),\n  ],\n  preview: {\n    select: {title: 'product.title', subtitle: 'product.asin'},\n    prepare: ({title, subtitle}: {title: any; subtitle: any}) => ({title: title || 'Amazon Product', subtitle}),\n  },\n})\n\n","import * as React from 'react'\nimport { useCallback, useState } from 'react'\nimport { Button, Card, Flex, Stack, Text, useToast } from '@sanity/ui'\nimport type { InputProps } from 'sanity'\nimport { useClient, useFormValue } from 'sanity'\nimport { getApiBaseUrl, getFetchProductPath } from '../lib/config'\n\nexport type AmazonFetchButtonInputProps = InputProps & {\n  document?: any\n}\n\nexport function AmazonFetchButton(props: AmazonFetchButtonInputProps) {\n  const toast = useToast()\n  const [loading, setLoading] = useState(false)\n  const client = useClient({ apiVersion: '2025-01-01' })\n\n  // State to store Amazon settings\n  const [amazonSettings, setAmazonSettings] = useState<any>(null)\n  const [isLoadingSettings, setIsLoadingSettings] = useState(true)\n\n  // Fetch Amazon settings using GROQ\n  React.useEffect(() => {\n    const fetchAmazonSettings = async () => {\n      try {\n        const query = `*[_type == \"amazon.settings\"][0]{\n          accessKey,\n          secretKey,\n          region,\n          partnerTag\n        }`\n        \n        const settings = await client.fetch(query)\n        setAmazonSettings(settings)\n      } catch (error) {\n        console.error('Error fetching Amazon settings:', error)\n      } finally {\n        setIsLoadingSettings(false)\n      }\n    }\n\n    fetchAmazonSettings()\n  }, [client])\n\n  // Get ASIN value from the form context\n  const asinValue = useFormValue(['asin']) as string || ''\n  const documentID = useFormValue(['_id']) as string || ''\n\n  const handleFetchFromAmazon = useCallback(async () => {\n    if (!asinValue) {\n      toast.push({\n        status: 'warning',\n        title: 'ASIN Required',\n        description: 'Please enter an ASIN number first'\n      })\n      return\n    }\n\n    if (!amazonSettings?.accessKey || !amazonSettings?.secretKey || !amazonSettings?.partnerTag) {\n      toast.push({\n        status: 'warning',\n        title: 'Missing Amazon Settings',\n        description: 'Please configure Amazon API credentials first'\n      })\n      return\n    }\n\n    \n    if (!documentID) {\n      toast.push({\n        status: 'error',\n        title: 'Document Not Found',\n        description: 'Cannot update document - document ID not available. Please save the document first.'\n      })\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const apiUrl = `${getApiBaseUrl()}${getFetchProductPath()}`\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ asin: asinValue })\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`)\n      }\n\n      const result = await response.json()\n      \n      if (result.success) {\n        const updateData = {\n          title: result.product.title,\n          slug: { current: result.product.title.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '') },\n          brand: result.product.brand,\n          price: result.product.price,\n          salePrice: result.product.salePrice,\n          currency: result.product.currency,\n          listPrice: result.product.listPrice,\n          url: result.product.url,\n          features: result.product.features,\n          images: result.product.images,\n          lastSyncedAt: result.product.lastSyncedAt\n        }\n\n        await client.patch(documentID).set(updateData).commit()\n\n        toast.push({\n          status: 'success',\n          title: 'Product Fetched Successfully!',\n          description: `Fetched: ${result.product.title}`\n        })\n      } else {\n        throw new Error(result.error || 'Failed to fetch product data')\n      }\n    } catch (error: any) {\n      toast.push({\n        status: 'error',\n        title: 'Fetch Failed',\n        description: error?.message || 'Unknown error occurred'\n      })\n    } finally {\n      setLoading(false)\n    }\n  }, [asinValue, amazonSettings, client, toast, documentID])\n\n  return (\n    <Card padding={3} tone=\"primary\" radius={2} shadow={1}>\n      <Stack space={3}>\n        <Flex gap={2}>\n          <Button\n            text=\"Fetch from Amazon\"\n            tone=\"positive\"\n            disabled={!asinValue || loading || isLoadingSettings}\n            onClick={handleFetchFromAmazon}\n            loading={loading}\n          />\n        </Flex>\n        \n        <Text size={1} muted>\n          {isLoadingSettings \n            ? 'Loading Amazon settings...'\n            : !amazonSettings?.accessKey \n            ? 'Please configure Amazon API credentials first'\n            : !asinValue \n            ? 'Enter an ASIN number above, then click \"Fetch from Amazon\" to automatically populate product details.'\n            : loading\n            ? 'Fetching product data from Amazon...'\n            : `Ready to fetch product data for ASIN: ${asinValue}`\n          }\n        </Text>\n        \n        {asinValue && !loading && !isLoadingSettings && (\n          <Text size={1} muted>\n            âœ… ASIN entered: {asinValue}\n          </Text>\n        )}\n      </Stack>\n    </Card>\n  )\n} ","import { defineType } from 'sanity'\nimport { AmazonFetchButton } from '../inputs/AmazonFetchButton'\n\nexport const amazonFetchButtonSchema = defineType({\n  name: 'amazonFetchButton',\n  title: 'Amazon Fetch Button',\n  type: 'string',\n  readOnly: true,\n  components: {\n    input: AmazonFetchButton,\n  },\n}) ","import {definePlugin} from 'sanity'\nimport {amazonSettingsSchema} from './schemas/amazonSettings'\nimport {amazonProductSchema} from './schemas/amazonProduct'\nimport {amazonProductBlock} from './schemas/amazonProductBlock'\nimport {amazonFetchButtonSchema} from './schemas/amazonFetchButton'\n\n/**\n * Configuration options for the Amazon Products plugin\n * @public\n */\nexport interface AmazonPluginOptions {\n  // Optional: override tool name or route\n  toolName?: string\n}\n\n/**\n * Sanity Studio plugin for fetching and managing Amazon products\n * @public\n */\nexport const amazonProductsPlugin = definePlugin<AmazonPluginOptions | void>((opts: AmazonPluginOptions | void) => {\n  const toolName = opts?.toolName ?? 'amazon'\n  return {\n    name: 'sanity-plugin-amazon-product-sync',\n    schema: {\n      types: [amazonSettingsSchema, amazonProductSchema, amazonProductBlock, amazonFetchButtonSchema],\n    },\n  }\n})\n\nexport default amazonProductsPlugin\n\n"],"names":[],"mappings":"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"}